[build-system]
requires = [
    "semver",
    "setuptools>=61.2",
    "setuptools_scm",
    "pyyaml",
]
build-backend = "setuptools.build_meta"

[project]
name = "cpac"
description = "C-PAC Python Package"
authors = [{name = "C-PAC developers", email = "cpac@cnl.childmind.org"}]
license = {text = "mit"}
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: MIT License",
    "Natural Language :: English",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3",
    "Topic :: Scientific/Engineering :: Bio-Informatics",
]
version = "1.8.5"
urls = {Homepage = "https://github.com/FCP-INDI/cpac"}
requires-python = ">=3.9"
dependencies = [
    "docker >= 4.2.1",
    "dockerpty",
    "docker-pycreds",
    'importlib_metadata; python_version < "3.8"',
    "pandas >= 0.23.4",
    "spython >= 0.0.81",
    "pyyaml",
    "rich",
    "semver",
    "tabulate >= 0.8.6",
    "tornado",
    "websocket-client",
]

[project.readme]
file = "README.rst"
content-type = "text/x-rst"

[project.optional-dependencies]
testing = [
    "alabaster",
    "imagesize",
    "pytest",
    "pytest-cov",
    "pytest-runne",
    "sphinx",
]

[project.scripts]
cpac = "cpac.__main__:run"

[tool.setuptools]
zip-safe = false
include-package-data = true
package-dir = {"" = "src"}
platforms = ["any"]

[tool.setuptools.packages.find]
where = ["src"]
exclude = ["tests"]
namespaces = false

[tool.distutils.test]
addopts = "--verbose -s"
extras = true

[tool.distutils.bdist_wheel]
universal = 1

[tool.distutils.build_sphinx]
source-dir = "docs"
build-dir = "docs/_build"

[tool.pytest.ini_options]
addopts = "-s"
# --cov cpac --cov-report term-missing -s
# -s
# --verbose
norecursedirs = [
    "dist",
    "build",
    ".tox",
]
testpaths = ["tests"]

[tool.aliases]
build = "bdist_wheel"
release = "build upload"
test = "pytest"

[tool.devpi.upload]
no-vcs = "1"
formats = "bdist_wheel"

[tool.flake8]
exclude = """
.tox
build
dist
.eggs
docs/conf.py"""
